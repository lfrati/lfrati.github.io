{{ define "main" }}
  {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
  {{ $dateHuman := .Date | time.Format ":date_long" }}

  <article class="post">

    <header class="post-header">
      <h1 class="post-title">{{ .Title }}</h1>
      <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
    </header>

    <div class="post-content">
    {{ .Content }}
    </div>

  </article>

  {{ if .TableOfContents }}
  {{ $h1s := partial "toc-h1-extract.html" . }}
  
  {{ if gt (len $h1s) 0 }}
  <!-- Table of Contents Component -->
  <button class="toc-button" id="tocButton" aria-label="Table of Contents">
    <div class="toc-lines" id="tocLines">
      {{ range $h1s }}
        <div class="line"></div>
      {{ end }}
    </div>
  </button>

  <!-- Expandable TOC pane -->
  <div class="toc-pane" id="tocPane">
    <h3>Table of Contents</h3>
    <div id="tocItems">
      {{ range $h1s }}
        <a href="#{{ .id }}" class="toc-item">{{ .text }}</a>
      {{ end }}
    </div>
  </div>
  {{ end }}
  {{ end }}

{{ end }}
