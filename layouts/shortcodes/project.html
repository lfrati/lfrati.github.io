{{/*
  Project shortcode
  Params:
    - title: display name
    - summary: short description
    - languages: comma-separated list (e.g., "Python, TypeScript")
    - base: either "github.com/lfrati/" or "fratilapo.com/"
    - path (optional): overrides link path; defaults to title as-is
*/}}

{{- $title := .Get "title" -}}
{{- $summary := .Get "summary" -}}
{{- $languagesParam := .Get "languages" | default "" -}}
{{- $base := .Get "base" | default "" -}}
{{- $path := (default ($title) (.Get "path")) -}}

{{- /* Build absolute URL from base and path */ -}}
{{- $prefixedBase := cond (hasPrefix $base "http") $base (printf "https://%s" $base) -}}
{{- $sep := cond (hasSuffix $prefixedBase "/") "" "/" -}}
{{- $href := printf "%s%s%s" $prefixedBase $sep $path -}}

{{- /* Base detection for icon selection */ -}}
{{- $isGithub := or (in $base "github.com/lfrati") (in $prefixedBase "github.com/lfrati") -}}
{{- $isWebsite := or (in $base "fratilapo.com") (in $prefixedBase "fratilapo.com") -}}

{{- /* Split languages by comma and trim spaces on render */ -}}
{{- $languages := split $languagesParam "," -}}

<a class="project-item" href="{{ $href }}" target="_blank" rel="noopener noreferrer">
  <div class="project-content">
    <div class="project-header">
      <h3 class="project-title">{{ $title }}</h3>
      {{- if gt (len $languages) 0 }}
        <div class="project-langs">
          {{- range $languages }}
            {{- $lang := trim . " " -}}
            {{- if $lang }}<span class="project-lang">{{ $lang }}</span>{{ end -}}
          {{- end }}
        </div>
      {{- end }}
    </div>
    {{- with $summary }}
      <p class="project-summary">{{ . }}</p>
    {{- end }}
  </div>
  <div class="project-actions">
    <span class="project-cta{{ if or $isGithub $isWebsite }} has-icon{{ end }}" aria-hidden="true">
      {{- if $isGithub -}}
        <svg class="icon icon-github" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.01.08-2.11 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.91.08 2.11.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
        </svg>
      {{- else if $isWebsite -}}
        <svg class="icon icon-globe" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="10"/>
          <line x1="2" y1="12" x2="22" y2="12"/>
          <path d="M12 2a15.3 15.3 0 0 1 0 20"/>
          <path d="M12 2a15.3 15.3 0 0 0 0 20"/>
        </svg>
      {{- else -}}
        Open â†’
      {{- end }}
    </span>
  </div>
</a>


