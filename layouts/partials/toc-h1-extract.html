{{/* Extract H1 headings from content and return them as a slice */}}
{{ $h1s := slice }}
{{ $content := .Content }}
{{ range findRE `(?s)<h1[^>]*id="([^"]*)"[^>]*>(.*?)</h1>` $content }}
  {{ $matches := findRE `id="([^"]*)"` . }}
  {{ if $matches }}
    {{ $id := index $matches 0 | replaceRE `id="([^"]*)"` "$1" }}
    {{ $text := . | replaceRE `(?s)<h1[^>]*>(.*?)</h1>` "$1" | replaceRE "<[^>]*>" "" | plainify }}
    {{ $h1s = $h1s | append (dict "id" $id "text" $text) }}
  {{ end }}
{{ end }}
{{ return $h1s }}
