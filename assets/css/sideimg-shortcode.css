/* Sideimg Shortcode Styles */

/* Intentionally non-positioned to allow absolute children to anchor to .post */
.sideimg {
  display: inline-block;
}

.sideimg-label {
  text-decoration: underline 2px dashed rgba(176, 196, 222, 0.8);
  text-underline-offset: 0.2em;
  cursor: pointer;
}

.sideimg-checkbox {
  display: none;
}

.sideimg-content {
  display: block;
  position: absolute;
  max-width: var(--sidenote-width);
  box-sizing: border-box;
  margin-top: -1.5em;
  color: #d8dee9;
  background: rgba(255, 255, 255, 0.03);
  border: 2px dashed rgba(176, 196, 222, 0.474);
  border-radius: 8px;
  padding: 0.8rem;
  font-size: 0.95rem;
  line-height: 1.5;
  /* Make the box fit content snugly */
  width: fit-content;
  min-width: 120px; /* Minimum width for very narrow images */
}

.sideimg-content.sideimg-right {
  right: 0;
  margin-right: calc(-1 * (var(--sidenote-width) + var(--sidenote-offset)));
}

.sideimg-content.sideimg-left {
  left: 0;
  margin-left: calc(-1 * (var(--sidenote-width) + var(--sidenote-offset)));
}

/* More specific selectors to override main.css */
.post-content .sideimg:hover .sideimg-label {
  color: #ffd199;
  text-decoration-color: #ffd199;
}

.post-content .sideimg:hover .sideimg-content {
  /* background: rgba(255, 255, 255, 0.08); */
  border-color: #ffd199;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Image styles */
.sideimg-content img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  transition: opacity 0.2s ease-in-out;
  display: block; /* Remove any inline spacing */
  margin: 0 auto; /* Center the image */
}

.sideimg-content a {
  display: block; /* Make the link fill the container */
  text-align: center; /* Center the image */
}

.sideimg-content a:hover img {
  opacity: 0.8;
}

/* Mobile: show inline when toggled */
@media screen and (max-width: 1024px) {
  .sideimg-content {
    position: static;
    width: 100%;
    max-width: 100%;
    display: none;
    margin: 10px 0;
  }

  .sideimg .sideimg-checkbox:checked ~ .sideimg-content {
    display: block;
  }

  .sideimg-content.sideimg-right,
  .sideimg-content.sideimg-left {
    margin-right: 0;
    margin-left: 0;
  }
}
